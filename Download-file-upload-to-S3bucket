import boto3
import requests
from botocore.exceptions import NoCredentialsError

def download_file_from_website(url, local_filename):
    """Download a file from a website to the local file system."""
    response = requests.get(url)
    if response.status_code == 200:
        with open(local_filename, 'wb') as f:
            f.write(response.content)
        print(f"Downloaded file from {url} to {local_filename}")
    else:
        print(f"Failed to download file from {url}, status code: {response.status_code}")
        raise Exception(f"Failed to download file, status code: {response.status_code}")

def upload_file_to_s3(local_filename, bucket, s3_filename=None):
    """Upload a file from the local file system to an S3 bucket."""
    s3 = boto3.client('s3')
    if s3_filename is None:
        s3_filename = local_filename

    try:
        s3.upload_file(local_filename, bucket, s3_filename)
        print(f"Uploaded file {local_filename} to S3 bucket {bucket} as {s3_filename}")
    except FileNotFoundError:
        print("The file was not found")
        raise
    except NoCredentialsError:
        print("Credentials not available")
        raise

def main():
    # URL of the file to download
    url = 'https://github.com/notepad-plus-plus/notepad-plus-plus/releases/download/v8.6.7/npp.8.6.7.Installer.x64.exe'  # Replace with the actual file URL
    # Local file path to save the downloaded file
    local_filename = 'Notepadnew'
    # S3 bucket name
    bucket_name = 'secondarybucket'  # Replace with your S3 bucket name
    # S3 object name (optional)
    s3_filename = 'Test/'  # Replace with the desired S3 object name

    # Download the file from the website
    download_file_from_website(url, local_filename)
    
    # Upload the downloaded file to S3
    upload_file_to_s3(local_filename, bucket_name, s3_filename)

if __name__ == "__main__":
    main()
